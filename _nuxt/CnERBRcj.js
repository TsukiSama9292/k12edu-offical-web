import{p as b,ak as q,k as x,al as S,j as D,b as o,am as te,H as I,an as $,ao as ne,ap as re,aq as ae,ar as se,as as F,at as U,au as ie,av as oe,a5 as w,l as le,aw as E,M as k,L as ue,x as P,R as ce,O as de,ad as ge,N as me,ax as A,ay as ve,F as fe,az as he}from"./Cck2oDxm.js";const L=b({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function J(e){const n=q("useRender");n.render=e}const Se=b({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function be(e){return{dimensionStyles:x(()=>{const r={},t=S(e.height),l=S(e.maxHeight),i=S(e.maxWidth),d=S(e.minHeight),g=S(e.minWidth),v=S(e.width);return t!=null&&(r.height=t),l!=null&&(r.maxHeight=l),i!=null&&(r.maxWidth=i),d!=null&&(r.minHeight=d),g!=null&&(r.minWidth=g),v!=null&&(r.width=v),r})}}const we=b({tag:{type:[String,Object,Function],default:"div"}},"tag");function ye(e){return{aspectStyles:x(()=>{const n=Number(e.aspectRatio);return n?{paddingBottom:String(1/n*100)+"%"}:void 0})}}const G=b({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...L(),...Se()},"VResponsive"),M=D()({name:"VResponsive",props:G(),setup(e,n){let{slots:r}=n;const{aspectStyles:t}=ye(e),{dimensionStyles:l}=be(e);return J(()=>{var i;return o("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[l.value,e.style]},[o("div",{class:"v-responsive__sizer",style:t.value},null),(i=r.additional)==null?void 0:i.call(r),r.default&&o("div",{class:["v-responsive__content",e.contentClass]},[r.default()])])}),{}}});function K(e){return te(()=>{const n=I(e),r=[],t={};if(n.background)if($(n.background)){if(t.backgroundColor=n.background,!n.text&&ne(n.background)){const l=re(n.background);if(l.a==null||l.a===1){const i=ae(l);t.color=i,t.caretColor=i}}}else r.push(`bg-${n.background}`);return n.text&&($(n.text)?(t.color=n.text,t.caretColor=n.text):r.push(`text-${n.text}`)),{colorClasses:r,colorStyles:t}})}function Ie(e){const{colorClasses:n,colorStyles:r}=K(()=>({text:I(e)}));return{textColorClasses:n,textColorStyles:r}}function _e(e){const{colorClasses:n,colorStyles:r}=K(()=>({background:I(e)}));return{backgroundColorClasses:n,backgroundColorStyles:r}}const Ce=b({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function ke(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:se();return{roundedClasses:x(()=>{const t=F(e)?e.value:e.rounded,l=F(e)?e.value:e.tile,i=[];if(t===!0||t==="")i.push(`${n}--rounded`);else if(typeof t=="string"||t===0)for(const d of String(t).split(" "))i.push(`rounded-${d}`);else(l||t===!1)&&i.push("rounded-0");return i})}}const xe=b({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),R=(e,n)=>{let{slots:r}=n;const{transition:t,disabled:l,group:i,...d}=e,{component:g=i?ie:oe,...v}=U(t)?t:{};let s;return U(t)?s=w(v,JSON.parse(JSON.stringify({disabled:l,group:i})),d):s=w({name:l||!t?"":t},d),le(g,s,r)};function Re(e,n){if(!E)return;const r=n.modifiers||{},t=n.value,{handler:l,options:i}=typeof t=="object"?t:{handler:t,options:{}},d=new IntersectionObserver(function(){var f;let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1?arguments[1]:void 0;const s=(f=e._observe)==null?void 0:f[n.instance.$.uid];if(!s)return;const u=g.some(y=>y.isIntersecting);l&&(!r.quiet||s.init)&&(!r.once||u||s.init)&&l(u,g,v),u&&r.once?Q(e,n):s.init=!0},i);e._observe=Object(e._observe),e._observe[n.instance.$.uid]={init:!1,observer:d},d.observe(e)}function Q(e,n){var t;const r=(t=e._observe)==null?void 0:t[n.instance.$.uid];r&&(r.observer.unobserve(e),delete e._observe[n.instance.$.uid])}const Ne={mounted:Re,unmounted:Q},ze=b({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...G(),...L(),...Ce(),...xe()},"VImg"),Te=D()({name:"VImg",directives:{intersect:Ne},props:ze(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,n){let{emit:r,slots:t}=n;const{backgroundColorClasses:l,backgroundColorStyles:i}=_e(()=>e.color),{roundedClasses:d}=ke(e),g=q("VImg"),v=k(""),s=ue(),u=k(e.eager?"loading":"idle"),f=k(),y=k(),m=x(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),_=x(()=>m.value.aspect||f.value/y.value||0);P(()=>e.src,()=>{N(u.value!=="idle")}),P(_,(a,c)=>{!a&&c&&s.value&&C(s.value)}),ce(()=>N());function N(a){if(!(e.eager&&a)&&!(E&&!a&&!e.eager)){if(u.value="loading",m.value.lazySrc){const c=new Image;c.src=m.value.lazySrc,C(c,null)}m.value.src&&de(()=>{var c;r("loadstart",((c=s.value)==null?void 0:c.currentSrc)||m.value.src),setTimeout(()=>{var h;if(!g.isUnmounted)if((h=s.value)!=null&&h.complete){if(s.value.naturalWidth||W(),u.value==="error")return;_.value||C(s.value,null),u.value==="loading"&&T()}else _.value||C(s.value),O()})})}}function T(){var a;g.isUnmounted||(O(),C(s.value),u.value="loaded",r("load",((a=s.value)==null?void 0:a.currentSrc)||m.value.src))}function W(){var a;g.isUnmounted||(u.value="error",r("error",((a=s.value)==null?void 0:a.currentSrc)||m.value.src))}function O(){const a=s.value;a&&(v.value=a.currentSrc||a.src)}let z=-1;ge(()=>{clearTimeout(z)});function C(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const h=()=>{if(clearTimeout(z),g.isUnmounted)return;const{naturalHeight:H,naturalWidth:V}=a;H||V?(f.value=V,y.value=H):!a.complete&&u.value==="loading"&&c!=null?z=window.setTimeout(h,c):(a.currentSrc.endsWith(".svg")||a.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,y.value=1)};h()}const j=me(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),X=()=>{var h;if(!m.value.src||u.value==="idle")return null;const a=o("img",{class:["v-img__img",j.value],style:{objectPosition:e.position},crossorigin:e.crossorigin,src:m.value.src,srcset:m.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:s,onLoad:T,onError:W},null),c=(h=t.sources)==null?void 0:h.call(t);return o(R,{transition:e.transition,appear:!0},{default:()=>[A(c?o("picture",{class:"v-img__picture"},[c,a]):a,[[he,u.value==="loaded"]])]})},Y=()=>o(R,{transition:e.transition},{default:()=>[m.value.lazySrc&&u.value!=="loaded"&&o("img",{class:["v-img__img","v-img__img--preload",j.value],style:{objectPosition:e.position},crossorigin:e.crossorigin,src:m.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),Z=()=>t.placeholder?o(R,{transition:e.transition,appear:!0},{default:()=>[(u.value==="loading"||u.value==="error"&&!t.error)&&o("div",{class:"v-img__placeholder"},[t.placeholder()])]}):null,p=()=>t.error?o(R,{transition:e.transition,appear:!0},{default:()=>[u.value==="error"&&o("div",{class:"v-img__error"},[t.error()])]}):null,ee=()=>e.gradient?o("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,B=k(!1);{const a=P(_,c=>{c&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{B.value=!0})}),a())})}return J(()=>{const a=M.filterProps(e);return A(o(M,w({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!B.value},l.value,d.value,e.class],style:[{width:S(e.width==="auto"?f.value:e.width)},i.value,e.style]},a,{aspectRatio:_.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>o(fe,null,[o(X,null,null),o(Y,null,null),o(ee,null,null),o(Z,null,null),o(p,null,null)]),default:t.default}),[[ve("intersect"),{handler:N,options:e.options},null,{once:!0}]])}),{currentSrc:v,image:s,state:u,naturalWidth:f,naturalHeight:y}}});export{R as M,Te as V,L as a,J as b,Se as c,_e as d,ke as e,Ce as f,K as g,Ie as h,xe as i,we as m,be as u};
